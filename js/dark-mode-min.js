window.DarkMode=function(e={}){const t={default:e.default||"system",selector:e.selector||".darkmode",storageKey:e.storageKey||"darkmode-theme",type:e.type||"dropdown",dropdownToggleName:e.dropdownToggleName||"Theme",dynamicAdjust:e.dynamicAdjust||!1,dynamicAdjustStartHour:e.dynamicAdjustStartHour||18,dynamicAdjustEndHour:e.dynamicAdjustEndHour||6},a=document.documentElement;let d=t.default;const o=t.storageKey;!function(e){if(e){const e=(new Date).getHours();d=e>=t.dynamicAdjustStartHour||e<t.dynamicAdjustEndHour?"dark":"light"}}(t.dynamicAdjust);const r=localStorage.getItem(o)||d;function s(e){localStorage.setItem(o,e)}function n(e){return"light"===e?"light":"dark"===e?"dark":matchMedia("(prefers-color-scheme: light)").matches?"light":matchMedia("(prefers-color-scheme: dark)").matches?"dark":void 0}function c(e){a.setAttribute("theme-mode",e)}function l(e){a.setAttribute("theme",e)}a.setAttribute("theme",r);let m=r;const i=n("system");function u(){let e=function(e){return{system:"light",light:"dark",dark:"light"}[e]||"system"}(m);"system"===m&&(e=n("system")),m=e,s(e),c(n(e)),l(e)}"system"===m&&(m=i),c(n(m)),document.addEventListener("DOMContentLoaded",(()=>{const e="darkmode";if("button"===t.type&&document.querySelectorAll(t.selector).forEach((e=>{e.classList.add("darkmode__toggle"),e.onclick=u})),"dropdown"===t.type){document.querySelectorAll(t.selector).forEach((function(a){var d=document.createElement("div");d.classList.add(e,"darkmode__dropdown");var o=document.createElement("button");o.classList.add("darkmode__toggle"),o.innerText=t.dropdownToggleName,o.setAttribute("aria-expanded","false"),d.appendChild(o);var r=document.createElement("ul");r.classList.add("darkmode__dropdown--menu"),[{className:"darkmode-light",text:"Light",theme:"light"},{className:"darkmode-dark",text:"Dark",theme:"dark"},{className:"darkmode-system",text:"OS System",theme:"system"}].forEach((e=>{var t=document.createElement("li"),a=document.createElement("button");a.type="button",a.classList.add(e.className),a.dataset.theme=e.theme,a.innerText=e.text,t.appendChild(a),r.appendChild(t)})),d.appendChild(r),a.parentNode.replaceChild(d,a)})),document.querySelectorAll(".darkmode__dropdown").forEach((e=>{const a=e.querySelector(".darkmode__toggle"),d=e.querySelector(".darkmode__dropdown--menu"),o=d.querySelectorAll("button");a.addEventListener("click",(()=>{d.classList.toggle("darkmode--open");var e=d.classList.contains("darkmode--open");a.setAttribute("aria-expanded",e?"true":"false")})),window.addEventListener("click",(e=>{a.contains(e.target)||(d.classList.remove("darkmode--open"),a.setAttribute("aria-expanded","false"))})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&d.classList.contains("darkmode--open")&&(d.classList.remove("darkmode--open"),a.setAttribute("aria-expanded","false"))})),o.forEach((e=>{e.addEventListener("click",(a=>{a.preventDefault(),a.stopPropagation(),function(e,t){const a=e.dataset.theme;e.classList.contains("active")||(t.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),m=a,s(a),c(n(a)),l(a))}(e,o),document.querySelectorAll(".darkmode__dropdown--menu button").forEach((e=>e.classList.remove("active"))),e.classList.add("active");const d=e.dataset.theme;localStorage.setItem(t.storageKey,d),document.querySelectorAll(".darkmode__dropdown--menu button").forEach((e=>{e.dataset.theme===d&&e.classList.add("active")}))}))}))}));let a=localStorage.getItem(t.storageKey);a||(a=d),document.querySelectorAll(".darkmode__dropdown--menu button").forEach((e=>{e.dataset.theme===a&&e.classList.add("active")}))}}))};